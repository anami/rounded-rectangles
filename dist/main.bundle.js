!function(t){function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}var e={};i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=4)}([function(t,i,e){"use strict";var n=e(2);i.Rectangle=n.Rectangle;var s=e(3);i.RectangleActionPointer=s.RectangleActionPointer},function(t,i,e){"use strict";var n=e(0),s=function(){function t(t){void 0===t&&(t="canvas");var i=this;this.rectangles=[],this.canvasElement=document.getElementById(t),this.canvasElement.width=document.body.clientWidth,this.canvasElement.height=document.body.clientHeight,this.canvasContext=this.canvasElement.getContext("2d"),window.addEventListener("resize",function(){i.canvasWidth=i.canvasElement.width=document.body.clientWidth,i.canvasHeight=i.canvasElement.height=document.body.clientHeight,i.render()}),document.addEventListener("mousemove",function(t){i.onMouseMove(t.offsetX,t.offsetY)}),document.addEventListener("touchmove",function(t){i.onMouseMove(t.touches[0].pageX,t.touches[0].pageY),t.preventDefault()}),document.addEventListener("mousedown",function(t){i.onMouseDown(t.offsetX,t.offsetY)}),document.addEventListener("touchstart",function(t){i.onMouseDown(t.touches[0].pageX,t.touches[0].pageY),t.preventDefault()}),document.addEventListener("mouseup",function(t){i.onMouseUp(t.offsetX,t.offsetY)}),document.addEventListener("touchend",function(t){i.onMouseUp(t.touches[0].pageX,t.touches[0].pageY),t.preventDefault()}),this.canvasWidth=this.canvasElement.offsetWidth,this.canvasHeight=this.canvasElement.offsetHeight}return t.prototype.render=function(){var t=this;this.canvasContext.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.rectangles.sort(function(t){return t.drag?1:0}).forEach(function(i){console.log(i.drag),i.render(t.canvasContext)})},t.prototype.onMouseMove=function(t,i){var e=this.rectangles.filter(function(t){return t.drag});0===e.length&&(e=this.rectangles);for(var n=0;n<e.length;n++)e[n].traceRay(t,i);this.render()},t.prototype.onMouseUp=function(t,i){for(var e=0;e<this.rectangles.length;e++)this.rectangles[e].releaseMouse(t,i);this.render()},t.prototype.onMouseDown=function(t,i){for(var e=0;e<this.rectangles.length;e++)if(this.rectangles[e].traceRay(t,i)){this.rectangles[e].onClick(t,i);break}},t.prototype.addRectangle=function(t,i,e,s,h,o){var r=new n.Rectangle(t,i,e,s,h,o);this.rectangles.push(r),this.render()},t.prototype.removeRectangle=function(t){this.rectangles=this.rectangles.filter(function(i){return i.id!==t})},t}();i.RoundedRectangleApplication=s},function(t,i,e){"use strict";var n=e(0),s=function(){function t(t,i,e,s,h,o){void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=0),void 0===h&&(h=0),void 0===o&&(o=0);var r=this;this.drag=!1,this.cornerPoints=[],this.id=t,this.x=i,this.y=e,this.width=s,this.height=h,this.radius=o;var a=10;this.cornerPoints.push(new n.RectangleActionPointer(this.x+this.width/2,this.y+this.height/2,a,function(t,i){r.setPosition(r.x+t,r.y+i),r.cornerPoints.forEach(function(e){e.x=e.x+t,e.y=e.y+i})})),this.cornerPoints.push(new n.RectangleActionPointer(this.x+a/2,this.y+a/2,a,function(t,i){var e=Math.sqrt(t*t+i*i);t<=0&&i<=0&&r.changeRadius(Math.max(0,r.radius-e)),t>=0&&i>=0&&r.changeRadius(Math.min(Math.min(r.width,r.height)/2,r.radius+e))})),this.cornerPoints.push(new n.RectangleActionPointer(this.x+this.width-a/2,this.y+a/2,a,function(t,i){var e=Math.sqrt(t*t+i*i);t>=0&&i<=0&&r.changeRadius(Math.max(0,r.radius-e)),t<=0&&i>=0&&r.changeRadius(Math.min(Math.min(r.width,r.height)/2,r.radius+e))})),this.cornerPoints.push(new n.RectangleActionPointer(this.x+this.width-a/2,this.y+this.height-a/2,a,function(t,i){var e=Math.sqrt(t*t+i*i);t>=0&&i>=0&&r.changeRadius(Math.max(0,r.radius-e)),t<=0&&i<=0&&r.changeRadius(Math.min(Math.min(r.width,r.height)/2,r.radius+e))})),this.cornerPoints.push(new n.RectangleActionPointer(this.x+a/2,this.y+this.height-a/2,a,function(t,i){var e=Math.sqrt(t*t+i*i);t<=0&&i>=0&&r.changeRadius(Math.max(0,r.radius-e)),t>=0&&i<=0&&r.changeRadius(Math.min(Math.min(r.width,r.height)/2,r.radius+e))}))}return t.prototype.render=function(t){t.beginPath(),t.moveTo(this.x+this.radius,this.y),t.lineTo(this.x+this.width-this.radius,this.y),t.quadraticCurveTo(this.x+this.width,this.y,this.x+this.width,this.y+this.radius),t.lineTo(this.x+this.width,this.y+this.height-this.radius),t.quadraticCurveTo(this.x+this.width,this.y+this.height,this.x+this.width-this.radius,this.y+this.height),t.lineTo(this.x+this.radius,this.y+this.height),t.quadraticCurveTo(this.x,this.y+this.height,this.x,this.y+this.height-this.radius),t.lineTo(this.x,this.y+this.radius),t.quadraticCurveTo(this.x,this.y,this.x+this.radius,this.y),t.fillStyle="purple",t.fill(),t.lineWidth=5,t.strokeStyle="black",t.stroke(),this.cornerPoints.filter(function(t){return!0===t.visibility}).forEach(function(i){t.beginPath(),t.arc(i.x,i.y,i.radius,0,2*Math.PI),t.fillStyle="aqua",t.fill(),t.lineWidth=2,t.strokeStyle="black",t.stroke()})},t.prototype.changeRadius=function(t){this.radius=t},t.prototype.traceRay=function(t,i){var e=t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height;return this.cornerPoints.forEach(function(n){n.visibility=e||n.drag,n.onMouseMove(t,i)}),e},t.prototype.onClick=function(t,i){for(var e=0;e<this.cornerPoints.length;e++){var n=this.cornerPoints[e];if(Math.sqrt((n.x-t)*(n.x-t)+(n.y-i)*(n.y-i))<=n.radius){n.drag=!0,this.drag=!0,n.dragStartX=t,n.dragStartY=i;break}}},t.prototype.releaseMouse=function(t,i){this.drag=!1,this.cornerPoints.forEach(function(t){t.drag=!1})},t.prototype.setSize=function(t,i){this.width=t,this.height=i},t.prototype.setPosition=function(t,i){this.x=t,this.y=i},t.prototype.setCornerRadius=function(t){this.radius=t},t.prototype.toJSON=function(){return{id:this.id,width:this.width,height:this.height,x:this.x,y:this.y,radius:this.radius}},t}();i.Rectangle=s},function(t,i,e){"use strict";var n=function(){function t(t,i,e,n){this.x=t,this.y=i,this.radius=e,this.callback=n,this.visibility=!1,this.drag=!1,this.dragStartX=0,this.dragStartY=0}return t.prototype.onMouseMove=function(t,i){var e=t-this.dragStartX,n=i-this.dragStartY;this.drag&&(this.callback(e,n),this.dragStartX=t,this.dragStartY=i)},t}();i.RectangleActionPointer=n},function(t,i,e){"use strict";var n=e(1),s=[{id:0,x:100,y:100,width:200,height:150,radius:10},{id:1,x:400,y:150,width:300,height:100,radius:30},{id:2,x:150,y:400,width:250,height:150,radius:20}],h=new n.RoundedRectangleApplication;s.forEach(function(t){h.addRectangle(t.id,t.x,t.y,t.width,t.height,t.radius)})}]);
//# sourceMappingURL=main.bundle.js.map